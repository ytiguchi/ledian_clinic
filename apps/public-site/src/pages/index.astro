---
import PublicLayout from '../layouts/PublicLayout.astro';
import CtaSection from '../components/CtaSection.astro';

// D1からデータ取得
const db = Astro.locals.runtime.env.DB;

// おすすめ情報（ニュース/キャンペーン）
type Campaign = {
  id: string;
  title: string;
  slug: string;
  description: string | null;
  image_url: string | null;
  start_date: string | null;
};

let campaigns: Campaign[] = [];
try {
  const result = await db.prepare(`
    SELECT id, title, slug, description, image_url, start_date
    FROM campaigns
    WHERE is_published = 1
    ORDER BY start_date DESC
    LIMIT 4
  `).all();
  campaigns = result.results as Campaign[];
} catch (e) {
  console.error('Failed to fetch campaigns:', e);
}

// 施設写真（ダウンロード済み）
const photos = [
  { src: '/images/photos/clinic-01.png', alt: '店内写真イメージ01' },
  { src: '/images/photos/clinic-02.png', alt: '店内写真イメージ02' },
  { src: '/images/photos/clinic-03.png', alt: '店内写真イメージ03' },
  { src: '/images/photos/clinic-04.png', alt: '店内写真イメージ04' },
];

// 3つの魅力（USP）
const points = [
  {
    image: '/images/points/point-img02.png',  // 元2枚目→1枚目
    numberImage: '/images/points/point01.svg',
    title: '仕事帰りでも通える。平日21時まで＆スムーズ導線',
    desc: ['「待ち時間が少なく、短時間で終わった」', 'というお声をいただいています。'],
  },
  {
    image: '/images/points/point-img03.png',  // 元3枚目→2枚目
    numberImage: '/images/points/point02.svg',
    title: '初診料・再診料・肌診断・カウンセリング無料',
    desc: ['施術前に"総額"を提示します。', '追加料金の心配なく安心してご来院いただけます。'],
  },
  {
    image: '/images/points/point-img01.png',  // 元1枚目→3枚目
    numberImage: '/images/points/point03.svg',
    title: '完全個室×清潔感。安心して相談できる空間',
    desc: ['「説明が分かりやすい」「声かけがちょうど良い」', 'など安心のお声を多くいただいています。'],
  },
];

// サービスカード
const serviceCards = [
  {
    href: '/service/#service-group-671',
    image: '/images/theme/front-banner.png',
    title: 'ニキビ・ニキビ痕・毛穴治療',
    desc: 'ポテンツァ・エリシスセンス・サブシジョン・トライフィルプロと豊富なメニューであなたのニキビ跡を改善します。',
  },
  {
    href: '/service/onda-pro/',
    image: '/images/theme/front-banner.png',
    title: 'オンダリフト',
    desc: '当院で人気No.1のオンダリフト。マイクロ波の熱で脂肪が減らし、肌を引き締めます。顔にも、ボディにも。',
  },
  {
    href: '/service/',
    image: '/images/theme/front-banner.png',
    title: '施術一覧',
    desc: '各種施術の詳細を記載しています。',
  },
  {
    href: '/price/',
    image: '/images/theme/front-banner.png',
    title: '料金表',
    desc: 'すべてのメニューの料金一覧はこちらからご覧いただけます。',
  },
  {
    href: '/doctor/',
    image: '/images/theme/front-banner.png',
    title: '院長・コンセプト紹介',
    desc: 'Ledian Clinic院長の紹介と、思いを記載しています。',
  },
  {
    href: '/subscription/',
    image: '/images/theme/subscription-banner.jpg',
    title: 'サブスクリプション',
    desc: 'お得なサブスクメニュー・定額サブスク',
  },
];

function formatDate(dateStr: string | null): string {
  if (!dateStr) return '';
  const date = new Date(dateStr);
  return `${date.getFullYear()}年${date.getMonth() + 1}月${date.getDate()}日`;
}
---

<PublicLayout 
  title="ホーム"
  description="六本木駅徒歩1分のLedian Clinic（レディアンクリニック）。最新美容機器と続けやすい価格で、肌治療・注入治療・痩身治療など幅広い美容医療を提供。"
>
  <!-- Hero Section / Slider - 本番完コピ版 -->
  <section class="hero">
    <div class="hero-slider-wrapper">
      <!-- PC版スライダー -->
      <div class="hero-slides hero-slides-pc">
        <div class="hero-slide active" data-slide="0">
          <img src="/images/hero/slider-pc-01.png" alt="Ledian Clinic" />
        </div>
        <div class="hero-slide" data-slide="1">
          <img src="/images/hero/slider-pc-02.png" alt="Ledian Clinic" />
        </div>
        <div class="hero-slide" data-slide="2">
          <img src="/images/hero/slider-pc-03.png" alt="Ledian Clinic" />
        </div>
      </div>
      <!-- SP版スライダー -->
      <div class="hero-slides hero-slides-sp">
        <div class="hero-slide active" data-slide="0">
          <img src="/images/hero/slider-sp-01.png" alt="Ledian Clinic" />
        </div>
        <div class="hero-slide" data-slide="1">
          <img src="/images/hero/slider-sp-02.png" alt="Ledian Clinic" />
        </div>
        <div class="hero-slide" data-slide="2">
          <img src="/images/hero/slider-sp-03.png" alt="Ledian Clinic" />
        </div>
      </div>
      <!-- スライダーインジケーター -->
      <div class="hero-indicators">
        <span class="hero-indicator active" data-slide="0"></span>
        <span class="hero-indicator" data-slide="1"></span>
        <span class="hero-indicator" data-slide="2"></span>
      </div>
    </div>
    
    <div class="hero-content">
      <h1 class="hero-title">
        <span class="hero-title-line hero-title-line-1">韓国クオリティを、美容習慣に。</span>
        <span class="hero-title-line hero-title-line-2">続けやすい価格と完全個室で、肌管理を日常へ</span>
      </h1>
      <div class="hero-text">
        <!-- キャッチコピーのみでシンプルに -->
      </div>
    </div>
  </section>

  <!-- Recommendation Section -->
  <section class="section recommendation">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title-en">RECOMMENDATION</h2>
        <p class="section-title-ja">おすすめ情報</p>
      </div>

      <ul class="recommendation-list">
        {campaigns.length > 0 ? (
          campaigns.map((campaign) => (
            <li class="recommendation-item">
              <a href={`/news/${campaign.slug}/`} class="news-card">
                <div class="news-card-image">
                  {campaign.image_url ? (
                    <img src={campaign.image_url} alt={campaign.title} />
                  ) : (
                    <div class="news-card-placeholder"></div>
                  )}
                </div>
                <p class="news-card-date">{formatDate(campaign.start_date)}</p>
                <h3 class="news-card-title">{campaign.title}</h3>
              </a>
            </li>
          ))
        ) : (
          <li class="no-data">現在、おすすめ情報はありません。</li>
        )}
      </ul>

      <div class="text-center">
        <a href="/news/" class="btn-more">おすすめ情報一覧</a>
      </div>
    </div>
  </section>

  <!-- Service Section -->
  <section class="section service">
    <div class="container">
      <div class="service-wrapper">
        <div class="service-header">
          <h2 class="section-title-en">SERVICE</h2>
          <p class="section-title-ja">サービスメニュー</p>
        </div>

      <ul class="service-grid">
        {serviceCards.map((card) => (
          <li>
            <a href={card.href} class="service-card">
              <div class="service-card-image">
                <img src={card.image} alt={card.title} loading="lazy" />
              </div>
              <div class="service-card-content">
                <h3 class="service-card-title">{card.title}</h3>
                <p class="service-card-desc">{card.desc}</p>
              </div>
            </a>
          </li>
        ))}
      </ul>
      </div>
    </div>
  </section>

  <CtaSection variant="home" />

  <!-- Point Section -->
  <section class="section point">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title-en">POINT</h2>
        <p class="section-title-ja">
          <img src="/images/points/point-title-miryoku.svg" alt="Ledian Clinicの3つの魅力" />
        </p>
      </div>

      <ul class="point-grid">
        {points.map((point) => (
          <li class="point-card">
            <div class="point-card-image">
              <img src={point.image} alt={point.title} loading="lazy" />
            </div>
            <div class="point-card-content">
              <p class="point-number">
                <img src={point.numberImage} alt="" />
              </p>
              <h4 class="point-title">{point.title}</h4>
              <p class="point-desc">
                {point.desc.map((line, i) => (
                  <Fragment>
                    {line}
                    {i < point.desc.length - 1 && <br />}
                  </Fragment>
                ))}
              </p>
            </div>
          </li>
        ))}
      </ul>
    </div>
  </section>

  <CtaSection variant="home" />

  <!-- Photo Section -->
  <section class="section photo">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title-en">PHOTO</h2>
        <p class="section-title-ja">施設写真</p>
      </div>
    </div>

    <div class="photo-grid">
      {photos.map((photo) => (
        <div class="photo-grid-item">
          <img src={photo.src} alt={photo.alt} loading="lazy" />
        </div>
      ))}
    </div>
  </section>

  <!-- Access Section -->
  <section class="section access">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title-en">ACCESS</h2>
        <p class="section-title-ja">アクセス</p>
      </div>

      <div class="access-content">
        <div class="access-map-wrapper">
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d810.399190628485!2d139.73242973493717!3d35.66230529385702!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x60188b02269b1f21%3A0x5ff4d0a1edc15f8d!2sLedian%20Clinic%20Roppongi!5e0!3m2!1sja!2sjp!4v1727759998504!5m2!1sja!2sjp" 
            class="access-map"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title="Google Map - Ledian Clinic"
          ></iframe>
        </div>

        <ul class="access-info">
          <li>〒106-0032 東京都港区六本木５丁目２−２ トーマスビル</li>
          <li>六本木駅 徒歩2分</li>
          <li>六本木交差点より 徒歩1分</li>
          <li>電話番号 : <a href="tel:050-8889-3863">050-8889-3863</a></li>
        </ul>
      </div>
    </div>
  </section>

  <CtaSection variant="home" className="cta-section-bottom" />
</PublicLayout>

<style>
  /* ============================================
     Hero Section - 本番サイト完コピ版
     本番: スライダー中央配置、キャッチコピー左下重ね
     ============================================ */
  .hero {
    position: relative;
    background-color: var(--color-bg);
    overflow: hidden;
    padding: 0 20px;
  }
  
  @media (min-width: 768px) {
    .hero {
      display: flex;
      align-items: stretch;
      min-height: 500px;
      padding: 0;
    }
  }
  
  @media (min-width: 1024px) {
    .hero {
      min-height: 600px;
    }
  }
  
  .hero-slider-wrapper {
    position: relative;
    width: 100%;
  }
  
  @media (min-width: 768px) {
    .hero-slider-wrapper {
      position: absolute;
      top: 0;
      right: 0;
      width: 82%;
      height: 100%;
    }
  }
  
  @media (min-width: 1024px) {
    .hero-slider-wrapper {
      width: 78%;
    }
  }
  
  .hero-slides {
    position: relative;
    height: 100%;
  }
  
  .hero-slides-pc {
    display: none;
  }
  
  .hero-slides-sp {
    display: block;
  }
  
  @media (min-width: 768px) {
    .hero-slides-pc {
      display: block;
      height: 100%;
    }
    .hero-slides-sp {
      display: none;
    }
  }
  
  .hero-slide {
    display: none;
    opacity: 0;
    transition: opacity 0.8s ease;
    height: 100%;
  }
  
  .hero-slide.active {
    display: block;
    opacity: 1;
  }
  
  .hero-slide img {
    width: 100%;
    height: auto;
    display: block;
    max-width: 100%;
  }
  
  @media (min-width: 768px) {
    .hero-slide img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }
  
  /* スライダーインジケーター */
  .hero-indicators {
    position: absolute;
    bottom: 20px;
    right: 20px;
    display: flex;
    gap: 10px;
    z-index: 10;
  }
  
  @media (min-width: 768px) {
    .hero-indicators {
      bottom: 30px;
      right: 30px;
    }
  }
  
  .hero-indicator {
    width: 30px;
    height: 3px;
    background: rgba(255, 255, 255, 0.5);
    cursor: pointer;
    transition: background 0.3s ease;
  }
  
  .hero-indicator.active {
    background: #2D2D2D;
  }
  
  /* キャッチコピー */
  .hero-content {
    position: relative;
    z-index: 10;
    padding: 30px 20px 50px;
    text-align: left;
    background: var(--color-bg);
  }
  
  @media (min-width: 768px) {
    .hero-content {
      position: relative;
      z-index: 10;
      width: 45%;
      max-width: 500px;
      padding: 60px 50px 60px 86px;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      background: var(--color-bg);
      flex-shrink: 0;
    }
  }
  
  @media (min-width: 1024px) {
    .hero-content {
      width: 40%;
      max-width: 550px;
      padding: 80px 60px 80px 94px;
    }
  }
  
  /* 見出し */
  .hero-title {
    font-family: 'Noto Serif JP', serif;
    font-size: 22px;
    font-weight: 700;
    letter-spacing: 2px;
    line-height: 1.7;
    margin-bottom: 0;
    color: #000;
  }
  
  @media (min-width: 768px) {
    .hero-title {
      font-size: 26px;
      letter-spacing: 3px;
    }
  }
  
  @media (min-width: 1024px) {
    .hero-title {
      font-size: 32px;
      letter-spacing: 4px;
      line-height: 1.6;
    }
  }
  
  @media (min-width: 1200px) {
    .hero-title {
      font-size: 36px;
      letter-spacing: 5px;
    }
  }
  
  .hero-title-line {
    display: block;
  }
  
  .hero-title-line-1 {
    color: #000;
    margin-bottom: 8px;
  }
  
  .hero-title-line-2 {
    color: #B6BCBE;
    font-size: 0.85em;
  }
  
  .hero-text {
    display: none;
  }
  
  /* Section Styles - 本番値: margin: 94px 0, padding: 0 94px */
  .section {
    padding: 94px 0;
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .section {
      padding: 60px 0;
    }
  }
  
  .section-header {
    text-align: center;
    margin-bottom: 50px;
  }
  
  /* 本番値: fontSize: 38px, fontWeight: 700, letterSpacing: 4px, lineHeight: 38px */
  .section-title-en {
    font-family: 'Noto Serif JP', serif;
    font-size: 38px;
    font-weight: 700;
    letter-spacing: 4px;
    line-height: 38px;
    color: #000;
    margin: 0;
  }
  
  @media (max-width: 768px) {
    .section-title-en {
      font-size: 28px;
      line-height: 28px;
    }
  }
  
  /* 本番値: fontSize: 18px, fontWeight: 400, color: rgb(182, 188, 190), margin: 10px 0 */
  .section-title-ja {
    font-size: 18px;
    font-weight: 400;
    color: #B6BCBE;
    letter-spacing: 0.1em;
    margin: 10px 0 0;
  }
  
  /* Recommendation Section */
  .recommendation {
    background: var(--color-bg);
  }
  
  .recommendation-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    list-style: none;
    margin: 0 0 40px;
    padding: 0;
  }
  
  @media (min-width: 768px) {
    .recommendation-list {
      grid-template-columns: repeat(4, 1fr);
      gap: 24px;
    }
  }
  
  .news-card {
    display: block;
    text-decoration: none;
  }
  
  .news-card-image {
    position: relative;
    aspect-ratio: 1;
    overflow: hidden;
    margin-bottom: 10px;
    background: #EFF2F4;
  }
  
  .news-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }
  
  .news-card:hover .news-card-image img {
    transform: scale(1.05);
  }
  
  .news-card-placeholder {
    width: 100%;
    height: 100%;
    background: var(--color-bg-gray);
  }
  
  .news-card-date {
    font-size: 12px;
    color: #B6BCBE;
    margin-bottom: 8px;
  }
  
  /* 本番値: fontSize: 16px, fontWeight: 700, lineHeight: 20px */
  .news-card-title {
    font-size: 16px;
    font-weight: 700;
    line-height: 20px;
    color: #000;
  }
  
  .no-data {
    grid-column: 1 / -1;
    text-align: center;
    color: var(--color-gray-medium);
    padding: 40px;
  }
  
  .btn-more {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 16px 60px;
    font-size: 14px;
    font-weight: 400;
    letter-spacing: 0.05em;
    color: #000;
    border: 1px solid #e5e0d8;
    background: #fff;
    text-decoration: none;
    transition: all 0.2s ease;
    position: relative;
  }
  
  .btn-more::after {
    content: '';
    position: absolute;
    right: 24px;
    top: 50%;
    width: 6px;
    height: 6px;
    border-right: 1.5px solid #000;
    border-bottom: 1.5px solid #000;
    transform: translateY(-50%) rotate(-45deg);
  }
  
  .btn-more:hover {
    background: #f9f7f4;
    opacity: 1;
  }
  
  /* Service Section - 本番完コピ */
  .service {
    background: #EFF2F4; /* 薄いグレー背景 */
  }
  
  /* 本番と同じボーダー付きラッパー */
  .service-wrapper {
    background: #fff;
    border: 1px solid #E5E0D8;
    padding: 50px 40px;
  }
  
  @media (max-width: 768px) {
    .service-wrapper {
      padding: 30px 20px;
    }
  }
  
  .service-header {
    margin-bottom: 40px;
    position: relative;
    padding-bottom: 20px;
  }
  
  .service-header::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 120px;
    right: 0;
    height: 1px;
    background: #E5E0D8;
  }
  
  @media (max-width: 768px) {
    .service-header::after {
      left: 100px;
    }
  }
  
  .service-header .section-title-en {
    text-align: left;
    margin-bottom: 5px;
  }
  
  .service-header .section-title-ja {
    text-align: left;
    margin: 0;
  }
  
  .service-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 20px;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  @media (min-width: 768px) {
    .service-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 25px;
    }
  }
  
  /* 本番値: display: flex, padding: 28px, border-radius: 5px, background: #fff */
  .service-card {
    display: flex;
    flex-direction: row;
    align-items: center;
    background: #fff;
    border: none;
    border-radius: 0;
    padding: 20px;
    text-decoration: none;
    transition: all 0.3s ease;
    position: relative;
    box-shadow: none;
    min-height: 120px;
  }
  
  @media (min-width: 768px) {
    .service-card {
      padding: 25px;
      min-height: 160px;
    }
  }
  
  .service-card:hover {
    opacity: 0.7;
  }
  
  .service-card::after {
    content: '>';
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    font-size: 20px;
    font-weight: 300;
    color: #2D2D2D;
  }
  
  @media (min-width: 768px) {
    .service-card::after {
      right: 20px;
      font-size: 24px;
    }
  }
  
  /* 本番値: width: ~200px, height: ~142px */
  .service-card-image {
    flex-shrink: 0;
    width: 100px;
    height: auto;
    overflow: hidden;
    margin-right: 15px;
  }
  
  @media (min-width: 768px) {
    .service-card-image {
      width: 180px;
      margin-right: 20px;
    }
  }
  
  .service-card-image img {
    width: 100%;
    height: auto;
    object-fit: contain;
    transition: transform 0.5s ease;
  }
  
  .service-card:hover .service-card-image img {
    transform: scale(1.05);
  }
  
  .service-card-content {
    flex: 1;
    min-width: 0; /* テキストの折り返しを有効に */
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-right: 30px;
  }
  
  /* 本番値: fontSize: 18px, fontWeight: 700, margin: 0, lineHeight: 1.4 */
  .service-card-title {
    font-size: 16px;
    font-weight: 700;
    margin: 0 0 10px;
    color: #2D2D2D;
    line-height: 1.4;
    word-break: keep-all; /* 日本語の折り返し制御 */
  }
  
  @media (min-width: 768px) {
    .service-card-title {
      font-size: 18px;
    }
  }
  
  /* 本番値: fontSize: 12px, lineHeight: 18px */
  .service-card-desc {
    font-size: 12px;
    color: #666;
    line-height: 1.6;
    margin: 0;
  }
  
  /* Point Section */
  .point {
    background: var(--color-bg-gray);
  }
  
  .point .section-title-ja img {
    height: 24px;
    width: auto;
  }
  
  .point-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 40px;
    list-style: none;
    margin: 0;
    padding: 0;
  }
  
  @media (min-width: 768px) {
    .point-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 50px;
    }
  }
  
  .point-card {
    text-align: center;
  }
  
  .point-card-image {
    margin-bottom: 25px;
    overflow: hidden;
  }
  
  .point-card-image img {
    width: 100%;
    height: auto;
  }
  
  .point-card-content {
    padding: 0 10px;
  }
  
  .point-number {
    margin-bottom: 15px;
  }
  
  .point-number img {
    height: 20px;
    width: auto;
  }
  
  .point-title {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 15px;
    color: #000;
  }
  
  .point-desc {
    font-size: 14px;
    color: #666;
    line-height: 1.8;
  }
  
  /* Photo Section */
  .photo {
    padding-bottom: 0;
    background: var(--color-bg);
  }
  
  .photo-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0;
  }
  
  @media (min-width: 768px) {
    .photo-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }
  
  .photo-grid-item {
    aspect-ratio: 1;
    overflow: hidden;
  }
  
  .photo-grid-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  /* Access Section */
  .access {
    background: var(--color-bg);
  }
  
  .access-content {
    max-width: 800px;
    margin: 0 auto;
  }
  
  .access-map-wrapper {
    margin-bottom: 30px;
  }
  
  .access-map {
    width: 100%;
    height: 400px;
    border: none;
  }
  
  @media (max-width: 768px) {
    .access-map {
      height: 300px;
    }
  }
  
  .access-info {
    list-style: none;
    margin: 0;
    padding: 0;
    text-align: center;
  }
  
  .access-info li {
    font-size: 0.9375rem;
    margin-bottom: 10px;
    line-height: 1.8;
  }
  
  .access-info a {
    color: var(--color-blue);
    text-decoration: none;
  }
  
  .access-info a:hover {
    text-decoration: underline;
  }
  
  /* Utility classes */
  .hidden-sp {
    display: block;
  }
  
  .hidden-pc {
    display: none;
  }
  
  @media (max-width: 768px) {
    .hidden-sp {
      display: none !important;
    }
    .hidden-pc {
      display: block !important;
    }
  }
  
  .text-center {
    text-align: center;
  }
</style>

<script>
  // ヒーロースライダー - 本番完コピ版
  document.addEventListener('DOMContentLoaded', () => {
    const slidesPC = document.querySelectorAll('.hero-slides-pc .hero-slide');
    const slidesSP = document.querySelectorAll('.hero-slides-sp .hero-slide');
    const indicators = document.querySelectorAll('.hero-indicator');
    const totalSlides = slidesPC.length;
    if (totalSlides === 0) return;
    
    let currentSlide = 0;
    let autoPlayInterval: ReturnType<typeof setInterval>;
    
    function goToSlide(index: number) {
      // 全スライドを非アクティブに
      slidesPC.forEach(slide => slide.classList.remove('active'));
      slidesSP.forEach(slide => slide.classList.remove('active'));
      indicators.forEach(indicator => indicator.classList.remove('active'));
      
      // 指定スライドをアクティブに
      currentSlide = index;
      if (slidesPC[currentSlide]) slidesPC[currentSlide].classList.add('active');
      if (slidesSP[currentSlide]) slidesSP[currentSlide].classList.add('active');
      if (indicators[currentSlide]) indicators[currentSlide].classList.add('active');
    }
    
    function nextSlide() {
      goToSlide((currentSlide + 1) % totalSlides);
    }
    
    function startAutoPlay() {
      autoPlayInterval = setInterval(nextSlide, 5000);
    }
    
    function stopAutoPlay() {
      clearInterval(autoPlayInterval);
    }
    
    // インジケータークリックイベント
    indicators.forEach((indicator, index) => {
      indicator.addEventListener('click', () => {
        stopAutoPlay();
        goToSlide(index);
        startAutoPlay();
      });
    });
    
    // 自動再生開始
    startAutoPlay();
  });
</script>
