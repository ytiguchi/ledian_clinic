globalThis.process ??= {}; globalThis.process.env ??= {};
import { q as decodeKey } from './chunks/astro/server_DMabXZY_.mjs';
import './chunks/astro-designed-error-pages_COn27otC.mjs';
import { N as NOOP_MIDDLEWARE_FN } from './chunks/noop-middleware_ChKA6Czs.mjs';

function sanitizeParams(params) {
  return Object.fromEntries(
    Object.entries(params).map(([key, value]) => {
      if (typeof value === "string") {
        return [key, value.normalize().replace(/#/g, "%23").replace(/\?/g, "%3F")];
      }
      return [key, value];
    })
  );
}
function getParameter(part, params) {
  if (part.spread) {
    return params[part.content.slice(3)] || "";
  }
  if (part.dynamic) {
    if (!params[part.content]) {
      throw new TypeError(`Missing parameter: ${part.content}`);
    }
    return params[part.content];
  }
  return part.content.normalize().replace(/\?/g, "%3F").replace(/#/g, "%23").replace(/%5B/g, "[").replace(/%5D/g, "]");
}
function getSegment(segment, params) {
  const segmentPath = segment.map((part) => getParameter(part, params)).join("");
  return segmentPath ? "/" + segmentPath : "";
}
function getRouteGenerator(segments, addTrailingSlash) {
  return (params) => {
    const sanitizedParams = sanitizeParams(params);
    let trailing = "";
    if (addTrailingSlash === "always" && segments.length) {
      trailing = "/";
    }
    const path = segments.map((segment) => getSegment(segment, sanitizedParams)).join("") + trailing;
    return path || "/";
  };
}

function deserializeRouteData(rawRouteData) {
  return {
    route: rawRouteData.route,
    type: rawRouteData.type,
    pattern: new RegExp(rawRouteData.pattern),
    params: rawRouteData.params,
    component: rawRouteData.component,
    generate: getRouteGenerator(rawRouteData.segments, rawRouteData._meta.trailingSlash),
    pathname: rawRouteData.pathname || void 0,
    segments: rawRouteData.segments,
    prerender: rawRouteData.prerender,
    redirect: rawRouteData.redirect,
    redirectRoute: rawRouteData.redirectRoute ? deserializeRouteData(rawRouteData.redirectRoute) : void 0,
    fallbackRoutes: rawRouteData.fallbackRoutes.map((fallback) => {
      return deserializeRouteData(fallback);
    }),
    isIndex: rawRouteData.isIndex,
    origin: rawRouteData.origin
  };
}

function deserializeManifest(serializedManifest) {
  const routes = [];
  for (const serializedRoute of serializedManifest.routes) {
    routes.push({
      ...serializedRoute,
      routeData: deserializeRouteData(serializedRoute.routeData)
    });
    const route = serializedRoute;
    route.routeData = deserializeRouteData(serializedRoute.routeData);
  }
  const assets = new Set(serializedManifest.assets);
  const componentMetadata = new Map(serializedManifest.componentMetadata);
  const inlinedScripts = new Map(serializedManifest.inlinedScripts);
  const clientDirectives = new Map(serializedManifest.clientDirectives);
  const serverIslandNameMap = new Map(serializedManifest.serverIslandNameMap);
  const key = decodeKey(serializedManifest.key);
  return {
    // in case user middleware exists, this no-op middleware will be reassigned (see plugin-ssr.ts)
    middleware() {
      return { onRequest: NOOP_MIDDLEWARE_FN };
    },
    ...serializedManifest,
    assets,
    componentMetadata,
    inlinedScripts,
    clientDirectives,
    routes,
    serverIslandNameMap,
    key
  };
}

const manifest = deserializeManifest({"hrefRoot":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/","cacheDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/node_modules/.astro/","outDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/dist/","srcDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/","publicDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/public/","buildClientDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/dist/","buildServerDir":"file:///Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/dist/_worker.js/","adapterName":"@astrojs/cloudflare","routes":[{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"type":"page","component":"_server-islands.astro","params":["name"],"segments":[[{"content":"_server-islands","dynamic":false,"spread":false}],[{"content":"name","dynamic":true,"spread":false}]],"pattern":"^\\/_server-islands\\/([^/]+?)\\/?$","prerender":false,"isIndex":false,"fallbackRoutes":[],"route":"/_server-islands/[name]","origin":"internal","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"type":"endpoint","isIndex":false,"route":"/_image","pattern":"^\\/_image\\/?$","segments":[[{"content":"_image","dynamic":false,"spread":false}]],"params":[],"component":"node_modules/@astrojs/cloudflare/dist/entrypoints/image-endpoint.js","pathname":"/_image","prerender":false,"fallbackRoutes":[],"origin":"internal","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/before-afters","isIndex":true,"type":"endpoint","pattern":"^\\/api\\/before-afters\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"before-afters","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/before-afters/index.ts","pathname":"/api/before-afters","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/campaigns","isIndex":true,"type":"endpoint","pattern":"^\\/api\\/campaigns\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"campaigns","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/campaigns/index.ts","pathname":"/api/campaigns","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/categories","isIndex":false,"type":"endpoint","pattern":"^\\/api\\/categories\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"categories","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/categories.ts","pathname":"/api/categories","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/pricing","isIndex":true,"type":"endpoint","pattern":"^\\/api\\/pricing\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"pricing","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/pricing/index.ts","pathname":"/api/pricing","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/pricing","isIndex":false,"type":"endpoint","pattern":"^\\/api\\/pricing\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"pricing","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/pricing.ts","pathname":"/api/pricing","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/subcategories","isIndex":false,"type":"endpoint","pattern":"^\\/api\\/subcategories\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"subcategories","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/subcategories.ts","pathname":"/api/subcategories","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[],"routeData":{"route":"/api/treatments","isIndex":false,"type":"endpoint","pattern":"^\\/api\\/treatments\\/?$","segments":[[{"content":"api","dynamic":false,"spread":false}],[{"content":"treatments","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/api/treatments.ts","pathname":"/api/treatments","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/before-afters/new","isIndex":false,"type":"page","pattern":"^\\/before-afters\\/new\\/?$","segments":[[{"content":"before-afters","dynamic":false,"spread":false}],[{"content":"new","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/before-afters/new.astro","pathname":"/before-afters/new","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/before-afters","isIndex":true,"type":"page","pattern":"^\\/before-afters\\/?$","segments":[[{"content":"before-afters","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/before-afters/index.astro","pathname":"/before-afters","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/campaigns/new","isIndex":false,"type":"page","pattern":"^\\/campaigns\\/new\\/?$","segments":[[{"content":"campaigns","dynamic":false,"spread":false}],[{"content":"new","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/campaigns/new.astro","pathname":"/campaigns/new","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/campaigns","isIndex":true,"type":"page","pattern":"^\\/campaigns\\/?$","segments":[[{"content":"campaigns","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/campaigns/index.astro","pathname":"/campaigns","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/index-unified","isIndex":false,"type":"page","pattern":"^\\/index-unified\\/?$","segments":[[{"content":"index-unified","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/index-unified.astro","pathname":"/index-unified","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/pricing/new","isIndex":false,"type":"page","pattern":"^\\/pricing\\/new\\/?$","segments":[[{"content":"pricing","dynamic":false,"spread":false}],[{"content":"new","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/pricing/new.astro","pathname":"/pricing/new","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/pricing","isIndex":true,"type":"page","pattern":"^\\/pricing\\/?$","segments":[[{"content":"pricing","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/pricing/index.astro","pathname":"/pricing","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":"html{font-family:Zen Kaku Gothic New,-apple-system,sans-serif}\n"}],"routeData":{"route":"/treatments","isIndex":true,"type":"page","pattern":"^\\/treatments\\/?$","segments":[[{"content":"treatments","dynamic":false,"spread":false}]],"params":[],"component":"src/pages/treatments/index.astro","pathname":"/treatments","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}},{"file":"","links":[],"scripts":[],"styles":[{"type":"inline","content":":root{font-family:system-ui,-apple-system,sans-serif;line-height:1.6}body{margin:0;background:#0b1021;color:#f6f8ff}header[data-astro-cid-j7pv25f6]{padding:24px;border-bottom:1px solid #222941}main[data-astro-cid-j7pv25f6]{padding:24px;max-width:960px;margin:0 auto}.card[data-astro-cid-j7pv25f6]{background:#11182c;border:1px solid #1c2540;border-radius:12px;padding:20px;margin-bottom:16px}.tag[data-astro-cid-j7pv25f6]{display:inline-block;background:#1f2b45;color:#cde0ff;border-radius:8px;padding:4px 10px;font-size:12px;margin-right:8px}a[data-astro-cid-j7pv25f6]{color:#8ac4ff;text-decoration:none}a[data-astro-cid-j7pv25f6]:hover{text-decoration:underline}h1[data-astro-cid-j7pv25f6],h2[data-astro-cid-j7pv25f6],h3[data-astro-cid-j7pv25f6]{margin:0 0 8px}p[data-astro-cid-j7pv25f6]{margin:0 0 12px}\n"}],"routeData":{"route":"/","isIndex":true,"type":"page","pattern":"^\\/$","segments":[],"params":[],"component":"src/pages/index.astro","pathname":"/","prerender":false,"fallbackRoutes":[],"distURL":[],"origin":"project","_meta":{"trailingSlash":"ignore"}}}],"base":"/","trailingSlash":"ignore","compressHTML":true,"componentMetadata":[["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/index.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/[id]/edit.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/index.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/new.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/[id]/edit.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/index.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/new.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/index-unified.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/[id]/edit.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/index.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/new.astro",{"propagation":"none","containsHead":true}],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/treatments/index.astro",{"propagation":"none","containsHead":true}]],"renderers":[],"clientDirectives":[["idle","(()=>{var l=(n,t)=>{let i=async()=>{await(await n())()},e=typeof t.value==\"object\"?t.value:void 0,s={timeout:e==null?void 0:e.timeout};\"requestIdleCallback\"in window?window.requestIdleCallback(i,s):setTimeout(i,s.timeout||200)};(self.Astro||(self.Astro={})).idle=l;window.dispatchEvent(new Event(\"astro:idle\"));})();"],["load","(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event(\"astro:load\"));})();"],["media","(()=>{var n=(a,t)=>{let i=async()=>{await(await a())()};if(t.value){let e=matchMedia(t.value);e.matches?i():e.addEventListener(\"change\",i,{once:!0})}};(self.Astro||(self.Astro={})).media=n;window.dispatchEvent(new Event(\"astro:media\"));})();"],["only","(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event(\"astro:only\"));})();"],["visible","(()=>{var a=(s,i,o)=>{let r=async()=>{await(await s())()},t=typeof i.value==\"object\"?i.value:void 0,c={rootMargin:t==null?void 0:t.rootMargin},n=new IntersectionObserver(e=>{for(let l of e)if(l.isIntersecting){n.disconnect(),r();break}},c);for(let e of o.children)n.observe(e)};(self.Astro||(self.Astro={})).visible=a;window.dispatchEvent(new Event(\"astro:visible\"));})();"]],"entryModules":{"\u0000astro-internal:middleware":"_astro-internal_middleware.mjs","\u0000virtual:astro:actions/noop-entrypoint":"noop-entrypoint.mjs","\u0000@astro-page:src/pages/api/before-afters/[id]@_@ts":"pages/api/before-afters/_id_.astro.mjs","\u0000@astro-page:src/pages/api/before-afters/index@_@ts":"pages/api/before-afters.astro.mjs","\u0000@astro-page:src/pages/api/campaigns/[id]@_@ts":"pages/api/campaigns/_id_.astro.mjs","\u0000@astro-page:src/pages/api/campaigns/index@_@ts":"pages/api/campaigns.astro.mjs","\u0000@astro-page:src/pages/api/categories@_@ts":"pages/api/categories.astro.mjs","\u0000@astro-page:src/pages/api/pricing/[id]@_@ts":"pages/api/pricing/_id_.astro.mjs","\u0000@astro-page:src/pages/api/pricing/index@_@ts":"pages/api/pricing.astro.mjs","\u0000@astro-page:src/pages/api/pricing@_@ts":"pages/api/pricing.astro2.mjs","\u0000@astro-page:src/pages/api/subcategories@_@ts":"pages/api/subcategories.astro.mjs","\u0000@astro-page:src/pages/api/treatments@_@ts":"pages/api/treatments.astro.mjs","\u0000@astro-page:src/pages/before-afters/new@_@astro":"pages/before-afters/new.astro.mjs","\u0000@astro-page:src/pages/before-afters/[id]/edit@_@astro":"pages/before-afters/_id_/edit.astro.mjs","\u0000@astro-page:src/pages/before-afters/index@_@astro":"pages/before-afters.astro.mjs","\u0000@astro-page:src/pages/campaigns/new@_@astro":"pages/campaigns/new.astro.mjs","\u0000@astro-page:src/pages/campaigns/[id]/edit@_@astro":"pages/campaigns/_id_/edit.astro.mjs","\u0000@astro-page:src/pages/campaigns/index@_@astro":"pages/campaigns.astro.mjs","\u0000@astro-page:src/pages/index-unified@_@astro":"pages/index-unified.astro.mjs","\u0000@astro-page:src/pages/pricing/new@_@astro":"pages/pricing/new.astro.mjs","\u0000@astro-page:src/pages/pricing/[id]/edit@_@astro":"pages/pricing/_id_/edit.astro.mjs","\u0000@astro-page:src/pages/pricing/index@_@astro":"pages/pricing.astro.mjs","\u0000@astro-page:src/pages/treatments/index@_@astro":"pages/treatments.astro.mjs","\u0000@astro-page:src/pages/index@_@astro":"pages/index.astro.mjs","\u0000@astrojs-ssr-virtual-entry":"index.js","\u0000@astro-renderers":"renderers.mjs","\u0000@astro-page:node_modules/@astrojs/cloudflare/dist/entrypoints/image-endpoint@_@js":"pages/_image.astro.mjs","\u0000@astrojs-ssr-adapter":"_@astrojs-ssr-adapter.mjs","\u0000@astrojs-manifest":"manifest_nMYuiH27.mjs","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/node_modules/unstorage/drivers/cloudflare-kv-binding.mjs":"chunks/cloudflare-kv-binding_DMly_2Gl.mjs","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/node_modules/astro/dist/assets/services/sharp.js":"chunks/sharp_CysDMGDc.mjs","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/new.astro?astro&type=script&index=0&lang.ts":"_astro/new.astro_astro_type_script_index_0_lang.D7TFdMwX.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/index.astro?astro&type=script&index=0&lang.ts":"_astro/index.astro_astro_type_script_index_0_lang.DK5Ak0BK.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/new.astro?astro&type=script&index=0&lang.ts":"_astro/new.astro_astro_type_script_index_0_lang.B5_3tu_A.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/index.astro?astro&type=script&index=0&lang.ts":"_astro/index.astro_astro_type_script_index_0_lang.COOxrUK5.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/index-unified.astro?astro&type=script&index=0&lang.ts":"_astro/index-unified.astro_astro_type_script_index_0_lang.AMHuOZMk.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/new.astro?astro&type=script&index=0&lang.ts":"_astro/new.astro_astro_type_script_index_0_lang.DxZBBumS.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/index.astro?astro&type=script&index=0&lang.ts":"_astro/index.astro_astro_type_script_index_0_lang.BgbbbdAS.js","/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/treatments/index.astro?astro&type=script&index=0&lang.ts":"_astro/index.astro_astro_type_script_index_0_lang.CNsQneM-.js","astro:scripts/before-hydration.js":""},"inlinedScripts":[["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/before-afters/new.astro?astro&type=script&index=0&lang.ts","let c=[],s=[],l=[];async function u(){try{c=(await(await fetch(\"/api/categories\")).json()).categories||[];const r=document.getElementById(\"categorySelect\");r&&(r.innerHTML='<option value=\"\">選択してください</option>'+c.map(t=>`<option value=\"${t.id}\">${t.name}</option>`).join(\"\"))}catch(a){console.error(\"カテゴリ読み込みエラー:\",a)}}async function p(a){try{s=(await(await fetch(`/api/subcategories?category_id=${a}`)).json()).subcategories||[];const t=document.getElementById(\"subcategorySelect\");t&&(t.innerHTML='<option value=\"\">選択してください</option>'+s.map(n=>`<option value=\"${n.id}\">${n.name}</option>`).join(\"\"))}catch(o){console.error(\"サブカテゴリ読み込みエラー:\",o)}}async function f(a){try{l=(await(await fetch(`/api/treatments?subcategory_id=${a}`)).json()).treatments||[];const t=document.getElementById(\"treatmentSelect\");t&&(t.innerHTML='<option value=\"\">選択してください</option>'+l.map(n=>`<option value=\"${n.id}\">${n.name}</option>`).join(\"\"))}catch(o){console.error(\"施術読み込みエラー:\",o)}}function d(a,o){const r=document.getElementById(a),t=document.getElementById(o);r?.addEventListener(\"input\",()=>{const n=r.value;n&&t?(t.src=n,t.classList.remove(\"hidden\")):t.classList.add(\"hidden\")})}document.addEventListener(\"DOMContentLoaded\",()=>{u();const a=document.getElementById(\"categorySelect\"),o=document.getElementById(\"subcategorySelect\"),r=document.getElementById(\"treatmentSelect\");a?.addEventListener(\"change\",n=>{const e=n.target.value;e&&(p(e),o.innerHTML='<option value=\"\">選択してください</option>',r.innerHTML='<option value=\"\">選択してください</option>')}),o?.addEventListener(\"change\",n=>{const e=n.target.value;e&&(f(e),r.innerHTML='<option value=\"\">選択してください</option>')}),d(\"beforeImageUrl\",\"beforePreview\"),d(\"afterImageUrl\",\"afterPreview\");const t=document.getElementById(\"beforeAfterForm\");t?.addEventListener(\"submit\",async n=>{n.preventDefault();const e=new FormData(t),m={treatment_id:e.get(\"treatment\"),before_image_url:e.get(\"beforeImageUrl\"),after_image_url:e.get(\"afterImageUrl\"),caption:e.get(\"caption\")||null,patient_age:e.get(\"patientAge\")?Number(e.get(\"patientAge\")):null,patient_gender:e.get(\"patientGender\")||null,treatment_count:e.get(\"treatmentCount\")?Number(e.get(\"treatmentCount\")):null,treatment_period:e.get(\"treatmentPeriod\")||null,is_published:e.get(\"isPublished\")===\"on\",sort_order:0};try{const i=await fetch(\"/api/before-afters\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(m)});if(i.ok)alert(\"保存しました\"),window.location.href=\"/before-afters\";else{const g=await i.json();alert(`保存に失敗しました: ${g.message||\"Unknown error\"}`)}}catch(i){console.error(\"保存エラー:\",i),alert(\"保存に失敗しました\")}})});"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/new.astro?astro&type=script&index=0&lang.ts","document.addEventListener(\"DOMContentLoaded\",()=>{const a=document.getElementById(\"campaignForm\"),o=document.getElementById(\"title\"),r=document.getElementById(\"slug\");o?.addEventListener(\"input\",()=>{if(!r.value){const t=o.value.toLowerCase().replace(/[^\\w\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").trim();r.value=t}}),a?.addEventListener(\"submit\",async i=>{i.preventDefault();const t=new FormData(a),s={title:t.get(\"title\"),slug:t.get(\"slug\"),description:t.get(\"description\")||null,campaign_type:t.get(\"campaignType\")||\"discount\",priority:t.get(\"priority\")?Number(t.get(\"priority\")):0,start_date:t.get(\"startDate\")||null,end_date:t.get(\"endDate\")||null,is_published:t.get(\"isPublished\")===\"on\",sort_order:0};try{const e=await fetch(\"/api/campaigns\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(s)});if(e.ok){const n=await e.json();alert(\"キャンペーンを作成しました\"),window.location.href=`/campaigns/${n.id}/edit`}else{const n=await e.json();alert(`作成に失敗しました: ${n.message||\"Unknown error\"}`)}}catch(e){console.error(\"作成エラー:\",e),alert(\"作成に失敗しました\")}})});"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/campaigns/index.astro?astro&type=script&index=0&lang.ts","let d=[],a=\"\";async function i(){try{const t=new URLSearchParams;a===\"published\"&&t.append(\"is_published\",\"1\"),a===\"unpublished\"&&t.append(\"is_published\",\"0\");const e=await fetch(`/api/campaigns?${t.toString()}`);if(!e.ok){const n=await e.json().catch(()=>({message:`HTTP ${e.status}: ${e.statusText}`}));console.error(\"API エラー:\",n),o(`キャンペーンの読み込みに失敗しました: ${n.message||n.error||\"Unknown error\"}`);return}const r=await e.json();if(r.error){console.error(\"API エラー:\",r),o(`キャンペーンの読み込みに失敗しました: ${r.message||r.error}`);return}d=r.campaigns||[],l()}catch(t){console.error(\"キャンペーン読み込みエラー:\",t),o(`キャンペーンの読み込みに失敗しました: ${t instanceof Error?t.message:\"Unknown error\"}`)}}function l(){const t=document.getElementById(\"campaignTableBody\");if(t){if(d.length===0){t.innerHTML=`\n        <tr>\n          <td colspan=\"5\" class=\"px-4 py-8 text-center text-gray-500\">\n            キャンペーンが見つかりませんでした\n          </td>\n        </tr>\n      `;return}t.innerHTML=d.map(e=>{const r=u(e.start_date,e.end_date),n=p(e);return`\n        <tr class=\"border-b hover:bg-gray-50\">\n          <td class=\"px-4 py-3\">\n            <div class=\"font-semibold\">${c(e.title)}</div>\n            ${e.description?`<div class=\"text-sm text-gray-500 mt-1\">${c(e.description)}</div>`:\"\"}\n          </td>\n          <td class=\"px-4 py-3\">\n            <div class=\"text-sm\">${r}</div>\n          </td>\n          <td class=\"px-4 py-3\">\n            <span class=\"text-sm\">${e.plan_count}件</span>\n          </td>\n          <td class=\"px-4 py-3 text-center\">\n            <span class=\"text-xs px-2 py-1 rounded ${e.is_published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}\">\n              ${e.is_published?\"公開中\":\"非公開\"}\n            </span>\n            ${n?`<div class=\"text-xs text-gray-500 mt-1\">${n}</div>`:\"\"}\n          </td>\n          <td class=\"px-4 py-3 text-center\">\n            <a href=\"/campaigns/${e.id}/edit\" class=\"text-accent hover:underline mr-3\">編集</a>\n            <button onclick=\"deleteCampaign('${e.id}')\" class=\"text-red-500 hover:underline\">削除</button>\n          </td>\n        </tr>\n      `}).join(\"\")}}function u(t,e){return!t&&!e?\"無期限\":t&&!e?`${s(t)} 〜 無期限`:!t&&e?`〜 ${s(e)}`:`${s(t)} 〜 ${s(e)}`}function s(t){if(!t)return\"\";const e=new Date(t);return`${e.getFullYear()}/${e.getMonth()+1}/${e.getDate()}`}function p(t){const e=new Date,r=t.start_date?new Date(t.start_date):null,n=t.end_date?new Date(t.end_date):null;return r&&e<r?\"開始前\":n&&e>n?\"終了済み\":t.is_published&&(!r||e>=r)&&(!n||e<=n)?\"実施中\":\"\"}function c(t){const e=document.createElement(\"div\");return e.textContent=t,e.innerHTML}function o(t){const e=document.getElementById(\"campaignTableBody\");e&&(e.innerHTML=`\n        <tr>\n          <td colspan=\"5\" class=\"px-4 py-8 text-center text-red-500\">\n            ${c(t)}\n          </td>\n        </tr>\n      `)}async function f(t){if(confirm(\"このキャンペーンを削除しますか？関連するプラン設定も削除されます。\"))try{(await fetch(`/api/campaigns/${t}`,{method:\"DELETE\"})).ok?await i():alert(\"削除に失敗しました\")}catch(e){console.error(\"削除エラー:\",e),alert(\"削除に失敗しました\")}}document.addEventListener(\"DOMContentLoaded\",()=>{i();const t=document.getElementById(\"publishedFilter\");t?.addEventListener(\"change\",()=>{a=t.value,i()})});window.deleteCampaign=f;"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/index-unified.astro?astro&type=script&index=0&lang.ts","document.addEventListener(\"DOMContentLoaded\",()=>{});"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/new.astro?astro&type=script&index=0&lang.ts","let l=[],p=[],u=[];async function m(){try{l=(await(await fetch(\"/api/categories\")).json()).categories||[];const a=document.getElementById(\"categorySelect\");a&&(a.innerHTML='<option value=\"\">選択してください</option>'+l.map(t=>`<option value=\"${t.id}\">${t.name}</option>`).join(\"\"))}catch(o){console.error(\"カテゴリ読み込みエラー:\",o)}}async function y(o){try{p=(await(await fetch(`/api/subcategories?category_id=${o}`)).json()).subcategories||[];const t=document.getElementById(\"subcategorySelect\");t&&(t.innerHTML='<option value=\"\">選択してください</option>'+p.map(r=>`<option value=\"${r.id}\">${r.name}</option>`).join(\"\"))}catch(n){console.error(\"サブカテゴリ読み込みエラー:\",n)}}async function f(o){try{u=(await(await fetch(`/api/treatments?subcategory_id=${o}`)).json()).treatments||[];const t=document.getElementById(\"treatmentSelect\");t&&(t.innerHTML='<option value=\"\">選択してください</option>'+u.map(r=>`<option value=\"${r.id}\">${r.name}</option>`).join(\"\"))}catch(n){console.error(\"施術読み込みエラー:\",n)}}document.addEventListener(\"DOMContentLoaded\",()=>{m();const o=document.getElementById(\"categorySelect\"),n=document.getElementById(\"subcategorySelect\"),a=document.getElementById(\"treatmentSelect\");o?.addEventListener(\"change\",c=>{const e=c.target.value;e&&(y(e),n.innerHTML='<option value=\"\">選択してください</option>',a.innerHTML='<option value=\"\">選択してください</option>')}),n?.addEventListener(\"change\",c=>{const e=c.target.value;e&&(f(e),a.innerHTML='<option value=\"\">選択してください</option>')});const t=document.getElementById(\"pricePlanForm\");t?.addEventListener(\"submit\",async c=>{c.preventDefault();const e=new FormData(t),d={treatment_id:e.get(\"treatment\"),plan_name:e.get(\"planName\"),plan_type:e.get(\"planType\"),sessions:e.get(\"sessions\")?Number(e.get(\"sessions\")):null,price:Number(e.get(\"price\")),price_taxed:Number(e.get(\"priceTaxed\")),cost_rate:e.get(\"costRate\")?Number(e.get(\"costRate\")):null,supply_cost:e.get(\"supplyCost\")?Number(e.get(\"supplyCost\")):null,staff_cost:e.get(\"staffCost\")?Number(e.get(\"staffCost\")):null};try{const s=await fetch(\"/api/pricing\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(d)});if(s.ok)alert(\"保存しました\"),window.location.href=\"/pricing\";else{const g=await s.json();alert(`保存に失敗しました: ${g.message||\"Unknown error\"}`)}}catch(s){console.error(\"保存エラー:\",s),alert(\"保存に失敗しました\")}});const r=t?.querySelector('input[name=\"price\"]'),i=t?.querySelector('input[name=\"priceTaxed\"]');r?.addEventListener(\"input\",c=>{const e=Number(c.target.value);i&&e>0&&(i.value=Math.round(e*1.1).toString())})});"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/pricing/index.astro?astro&type=script&index=0&lang.ts","let i=[],l=[],c=\"\",d=\"\";async function p(){try{const t=await fetch(\"/api/categories\");if(!t.ok){const r=await t.json().catch(()=>({message:`HTTP ${t.status}: ${t.statusText}`}));throw console.error(\"カテゴリAPI エラー:\",r),new Error(r.message||r.error||\"カテゴリの読み込みに失敗しました\")}const e=await t.json();if(e.error)throw console.error(\"カテゴリAPI エラー:\",e),new Error(e.message||e.error||\"カテゴリの読み込みに失敗しました\");l=e.categories||[];const n=document.getElementById(\"categoryFilter\");n&&(n.innerHTML='<option value=\"\">すべてのカテゴリ</option>'+l.map(r=>`<option value=\"${r.id}\">${r.name}</option>`).join(\"\")),await a()}catch(t){console.error(\"データ読み込みエラー:\",t),s(\"データの読み込みに失敗しました\")}}async function a(){try{const t=new URLSearchParams;d&&t.append(\"category_id\",d),c&&t.append(\"search\",c);const e=await fetch(`/api/pricing?${t.toString()}`);if(!e.ok){const r=await e.json().catch(()=>({message:`HTTP ${e.status}: ${e.statusText}`}));console.error(\"API エラー:\",r),s(`料金データの読み込みに失敗しました: ${r.message||r.error||\"Unknown error\"}`);return}const n=await e.json();if(n.error){console.error(\"API エラー:\",n),s(`料金データの読み込みに失敗しました: ${n.message||n.error}`);return}i=n.plans||[],g()}catch(t){console.error(\"料金データ読み込みエラー:\",t),s(\"料金データの読み込みに失敗しました\")}}function g(){const t=document.getElementById(\"priceTableBody\");if(t){if(i.length===0){t.innerHTML=`\n        <tr>\n          <td colspan=\"7\" class=\"px-4 py-8 text-center text-gray-500\">\n            データが見つかりませんでした\n          </td>\n        </tr>\n      `;return}t.innerHTML=i.map(e=>`\n      <tr class=\"border-b hover:bg-gray-50\">\n        <td class=\"px-4 py-3\">${o(e.category_name)}</td>\n        <td class=\"px-4 py-3\">${o(e.treatment_name)}</td>\n        <td class=\"px-4 py-3\">\n          ${o(e.plan_name)}\n          ${e.sessions?` (${e.sessions}回)`:\"\"}\n        </td>\n        <td class=\"px-4 py-3 text-right\">¥${e.price.toLocaleString()}</td>\n        <td class=\"px-4 py-3 text-right\">¥${e.price_taxed.toLocaleString()}</td>\n        <td class=\"px-4 py-3 text-right\">\n          ${e.campaign_price_taxed?`<span class=\"text-accent font-semibold\">¥${e.campaign_price_taxed.toLocaleString()}</span>`:'<span class=\"text-gray-400\">-</span>'}\n        </td>\n        <td class=\"px-4 py-3 text-center\">\n          <a href=\"/pricing/${e.id}/edit\" class=\"text-accent hover:underline mr-3\">編集</a>\n          <button onclick=\"deletePlan('${e.id}')\" class=\"text-red-500 hover:underline\">削除</button>\n        </td>\n      </tr>\n    `).join(\"\")}}function o(t){const e=document.createElement(\"div\");return e.textContent=t,e.innerHTML}function s(t){const e=document.getElementById(\"priceTableBody\");e&&(e.innerHTML=`\n        <tr>\n          <td colspan=\"7\" class=\"px-4 py-8 text-center text-red-500\">\n            ${o(t)}\n          </td>\n        </tr>\n      `)}async function u(t){if(confirm(\"このプランを削除しますか？\"))try{(await fetch(`/api/pricing/${t}`,{method:\"DELETE\"})).ok?await a():alert(\"削除に失敗しました\")}catch(e){console.error(\"削除エラー:\",e),alert(\"削除に失敗しました\")}}document.addEventListener(\"DOMContentLoaded\",()=>{p();const t=document.getElementById(\"searchInput\"),e=document.getElementById(\"categoryFilter\"),n=document.querySelector(\"button\");t?.addEventListener(\"keypress\",r=>{r.key===\"Enter\"&&(c=t.value,a())}),e?.addEventListener(\"change\",()=>{d=e.value,a()}),n?.addEventListener(\"click\",()=>{t&&(c=t.value,a())})});window.deletePlan=u;"],["/Users/iguchiyuuta/Dev/ledian_clinic/apps/internal-site/src/pages/treatments/index.astro?astro&type=script&index=0&lang.ts","console.log(\"施術一覧読み込み準備中...\");"]],"assets":["/_astro/index.astro_astro_type_script_index_0_lang.DK5Ak0BK.js","/_worker.js/_@astrojs-ssr-adapter.mjs","/_worker.js/_astro-internal_middleware.mjs","/_worker.js/index.js","/_worker.js/noop-entrypoint.mjs","/_worker.js/renderers.mjs","/_worker.js/pages/_image.astro.mjs","/_worker.js/pages/before-afters.astro.mjs","/_worker.js/pages/campaigns.astro.mjs","/_worker.js/pages/index-unified.astro.mjs","/_worker.js/pages/index.astro.mjs","/_worker.js/pages/pricing.astro.mjs","/_worker.js/pages/treatments.astro.mjs","/_worker.js/chunks/Layout_Da37j1AH.mjs","/_worker.js/chunks/_@astrojs-ssr-adapter_olXBZ2MI.mjs","/_worker.js/chunks/astro-designed-error-pages_COn27otC.mjs","/_worker.js/chunks/astro_D9z6sWaR.mjs","/_worker.js/chunks/cloudflare-kv-binding_DMly_2Gl.mjs","/_worker.js/chunks/db_CsOQ555j.mjs","/_worker.js/chunks/image-endpoint_CjQHrDjn.mjs","/_worker.js/chunks/index_BYNQncPZ.mjs","/_worker.js/chunks/noop-middleware_ChKA6Czs.mjs","/_worker.js/chunks/path_CH3auf61.mjs","/_worker.js/chunks/remote_CrdlObHx.mjs","/_worker.js/chunks/sharp_CysDMGDc.mjs","/_worker.js/pages/api/before-afters.astro.mjs","/_worker.js/pages/api/campaigns.astro.mjs","/_worker.js/pages/api/categories.astro.mjs","/_worker.js/pages/api/pricing.astro.mjs","/_worker.js/pages/api/pricing.astro2.mjs","/_worker.js/pages/api/subcategories.astro.mjs","/_worker.js/pages/api/treatments.astro.mjs","/_worker.js/pages/before-afters/new.astro.mjs","/_worker.js/pages/pricing/new.astro.mjs","/_worker.js/pages/campaigns/new.astro.mjs","/_worker.js/chunks/astro/server_DMabXZY_.mjs","/_worker.js/pages/api/before-afters/_id_.astro.mjs","/_worker.js/pages/api/campaigns/_id_.astro.mjs","/_worker.js/pages/api/pricing/_id_.astro.mjs","/_worker.js/pages/before-afters/_id_/edit.astro.mjs","/_worker.js/pages/pricing/_id_/edit.astro.mjs","/_worker.js/pages/campaigns/_id_/edit.astro.mjs"],"buildFormat":"directory","checkOrigin":true,"allowedDomains":[],"serverIslandNameMap":[],"key":"eChac0xc6NYC2HBdYGPvU2h0u8frcqcWfAU+L+OUNiY=","sessionConfig":{"driver":"cloudflare-kv-binding","options":{"binding":"SESSION"}}});
if (manifest.sessionConfig) manifest.sessionConfig.driverModule = () => import('./chunks/cloudflare-kv-binding_DMly_2Gl.mjs');

export { manifest };
