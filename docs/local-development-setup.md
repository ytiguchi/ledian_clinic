# ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

## ğŸ“‹ ç¾åœ¨ã®çŠ¶æ³

**ãƒªãƒ¢ãƒ¼ãƒˆï¼ˆstaging/previewï¼‰**: âœ… ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨æ¸ˆã¿  
**ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ**: âš ï¸ æœªè¨­å®š

## ğŸ”§ ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

### æ–¹æ³•1: ãƒ­ãƒ¼ã‚«ãƒ«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ

```bash
# ãƒ­ãƒ¼ã‚«ãƒ«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
npx wrangler@4.56.0 d1 create ledian-internal-local \
  --config wrangler.internal.toml \
  --local

# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«é©ç”¨
npx wrangler@4.56.0 d1 migrations apply ledian-internal-prod \
  --config wrangler.internal.toml \
  --local
```

### æ–¹æ³•2: wrangler pages dev ã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ã¯ã€`wrangler pages dev` ã‚’ä½¿ç”¨ã—ã¦ãƒªãƒ¢ãƒ¼ãƒˆD1ï¼ˆpreviewï¼‰ã‚’å‚ç…§ã—ã¾ã™ã€‚

```bash
cd apps/internal-site

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒªãƒ¢ãƒ¼ãƒˆD1 previewã‚’å‚ç…§ï¼‰
npx wrangler@4.56.0 pages dev dist --config ../../wrangler.internal.toml
```

**æ³¨æ„**: Astroã®`npm run dev`ã§ã¯ã€Pages Functionsã®D1ãƒã‚¤ãƒ³ãƒ‰ã¯å‹•ä½œã—ã¾ã›ã‚“ã€‚`wrangler pages dev`ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### æ–¹æ³•3: Astroé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ + ãƒ¢ãƒƒã‚¯APIï¼ˆé–‹ç™ºä¸­ï¼‰

ç¾åœ¨ã€`npm run dev`ï¼ˆAstroé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯é™çš„ã‚µã‚¤ãƒˆã¨ã—ã¦å‹•ä½œã—ã€D1ãƒã‚¤ãƒ³ãƒ‰ã¯ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚

## ğŸ¯ æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

1. **ã‚³ãƒ¼ãƒ‰ç·¨é›†**: Astroé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼ˆ`npm run dev`ï¼‰ã§UIç¢ºèª
2. **APIå‹•ä½œç¢ºèª**: `wrangler pages dev`ã§D1çµ±åˆã‚’ç¢ºèª
3. **ãƒ‡ãƒ—ãƒ­ã‚¤å‰ãƒ†ã‚¹ãƒˆ**: `npm run build` â†’ `wrangler pages dev dist`

### ç¾åœ¨ã®åˆ¶é™äº‹é …

- `npm run dev`ï¼ˆAstroé–‹ç™ºã‚µãƒ¼ãƒãƒ¼ï¼‰ã§ã¯D1ã¯ä½¿ç”¨ã§ããªã„
- API Routesã¯`wrangler pages dev`ã§ã®ã¿å‹•ä½œ
- ãƒ­ãƒ¼ã‚«ãƒ«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯åˆ¥é€”ä½œæˆãŒå¿…è¦

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ãƒ­ãƒ¼ã‚«ãƒ«D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
2. `wrangler pages dev`ã§ã®é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºç«‹
3. ã¾ãŸã¯ã€ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ãŸé–‹ç™ºç’°å¢ƒã‚’æ§‹ç¯‰

